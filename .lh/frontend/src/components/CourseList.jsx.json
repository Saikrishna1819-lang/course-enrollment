{
    "sourceFile": "frontend/src/components/CourseList.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 36,
            "patches": [
                {
                    "date": 1754033967563,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754039248748,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,64 +1,6 @@\n-// import React, { useEffect, useState } from 'react'\r\n-// import CourseCard from './CourseCard'\r\n-// import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api'\r\n \r\n-// ]\r\n \r\n-// const CourseList = () => {\r\n-//     const [courses,setCourses]=useState()\r\n-//     const [enrolledCourseIds,setEnrolledCourseIds]=useState([])\r\n-//     const handleEnroll=(courseId)=>{\r\n-//        try {\r\n-//          await enrollCourse(courseId)\r\n-//         setEnrolledCourseIds((prev)=>[...prev,courseId])\r\n-\r\n-//        } catch (error) {\r\n-//         console.error(\"Enrollment failed\",error.response?.data?.message||error.message);\r\n-                \r\n-//        }\r\n-//     }\r\n-\r\n-//     const loadData=async()=>{\r\n-//         try{\r\n-\r\n-//             const courseData=await fetchCourses()\r\n-//             const enrollmentsData=await fetchEnrollments()\r\n-//             const enrolledIds=enrollmentsData.map((e)=> e.courseId)\r\n-//             setCourses(courseData)\r\n-//             setEnrolledCourses(enrolledIds)\r\n-//         }\r\n-//         catch(error){\r\n-//             console.error(\"Error loading data\",error);\r\n-            \r\n-//         }\r\n-//     }\r\n-//     useEffect(()=>{\r\n-//         loadData()\r\n-//     },[])\r\n-\r\n-//   return (\r\n-//     <div className='grid md:grid-cols-3 gap-4'>\r\n-//         {/* <p className='text-center text-gray-600'>Loading courses</p> */}\r\n-//         {\r\n-//             courses.map((course)=>(\r\n-//                 <CourseCard\r\n-                  \r\n-//                    key={course._id}\r\n-//                    course={course}\r\n-//                    enrolled={enrolledCourses.includes(course._id)}\r\n-//                    onEnroll={handleEnroll}\r\n-//                 />\r\n-//             ))\r\n-//         }\r\n-\r\n-//     </div>\r\n-//   )\r\n-// }\r\n-\r\n-// export default CourseList\r\n-\r\n-\r\n import React, { useEffect, useState } from 'react';\r\n import CourseCard from './CourseCard';\r\n import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n \r\n@@ -78,9 +20,9 @@\n   const loadData = async () => {\r\n     try {\r\n       const courseData = await fetchCourses();\r\n       const enrollmentsData = await fetchEnrollments();\r\n-      const enrolledIds = enrollmentsData.map((e) => e.course._id); // Fix here\r\n+      const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n       setCourses(courseData);\r\n       setEnrolledCourses(enrolledIds);\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n"
                },
                {
                    "date": 1754039477702,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid md:grid-cols-3 gap-4'>\r\n+    <div className='grid md:grid-cols-3 gap-4 text-black'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754039506979,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid md:grid-cols-3 gap-4 text-black'>\r\n+    <div className='grid md:grid-cols-3 gap-4 pxx-10 text-black'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754039519163,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid md:grid-cols-3 gap-4 pxx-10 text-black'>\r\n+    <div className='grid md:grid-cols-3 gap-8 px-10 text-black'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754040764414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid md:grid-cols-3 gap-8 px-10 text-black'>\r\n+    <div className='grid md:grid-cols-3 gap-8 px-10 text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754040772359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n   return (\r\n     <div className='grid md:grid-cols-3 gap-8 px-10 text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n-          <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n+          <p className='text-center text-gray-100 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n           courses.map((course) => (\r\n             <CourseCard\r\n               key={course._id}\r\n"
                },
                {
                    "date": 1754040779622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n   return (\r\n     <div className='grid md:grid-cols-3 gap-8 px-10 text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n-          <p className='text-center text-gray-100 col-span-full'>Loading courses...</p>\r\n+          <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n           courses.map((course) => (\r\n             <CourseCard\r\n               key={course._id}\r\n"
                },
                {
                    "date": 1754040937005,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid md:grid-cols-3 gap-8 px-10 text-white'>\r\n+    <div className='grid grid-cols:2 md:grid-cols-3 gap-8 px-10 text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754040951609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid grid-cols:2 md:grid-cols-3 gap-8 px-10 text-white'>\r\n+    <div className='grid grid-cols-2 md:grid-cols-3 gap-8 px-10 text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754040979306,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid grid-cols-2 md:grid-cols-3 gap-8 px-10 text-white'>\r\n+    <div className='grid grid-cols-1 md:grid-cols-3 gap-8 px-10 text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754040996433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid grid-cols-1 md:grid-cols-3 gap-8 px-10 text-white'>\r\n+    <div className='grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 px-10 text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754041031640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 px-10 text-white'>\r\n+    <div className='grid  md:grid-cols-3 gap-8 px-10 w-full  text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754041047237,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid  md:grid-cols-3 gap-8 px-10 w-full  text-white'>\r\n+    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[200px] text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754041054647,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[200px] text-white'>\r\n+    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[600px] text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754041060027,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[600px] text-white'>\r\n+    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[500px] text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754041066177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[500px] text-white'>\r\n+    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[500px] px-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754041082755,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[500px] px-auto text-white'>\r\n+    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754041276213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid  md:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n+    <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1754042325480,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,8 +33,13 @@\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n+    <>\r\n+     <div className=\"gap-5 flex mb-10 justify-center\">\r\n+        <button  className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n+        <button className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">All Courses</button>\r\n+      </div>\r\n     <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n@@ -49,8 +54,9 @@\n           ))\r\n         )\r\n       }\r\n     </div>\r\n+    </>\r\n   );\r\n };\r\n \r\n export default CourseList;\r\n"
                },
                {
                    "date": 1754042651336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,19 +26,29 @@\n       setEnrolledCourses(enrolledIds);\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n     }\r\n-  };\r\n+  }\r\n \r\n+  const handleAllCourses=async()=>{\r\n+     const courseData = await fetchCourses();\r\n+     setCourses(courseData)\r\n+\r\n+  }\r\n+  const handleMyCourses=async()=>{\r\n+     const enrollmentsData = await fetchEnrollments();\r\n+     setCourses(enrollmentsData)\r\n+  }\r\n+\r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n     <>\r\n      <div className=\"gap-5 flex mb-10 justify-center\">\r\n-        <button  className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n-        <button className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">All Courses</button>\r\n+        <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n+        <button onClick={handleAllCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">All Courses</button>\r\n       </div>\r\n     <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n"
                },
                {
                    "date": 1754044996706,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,68 +4,84 @@\n import CourseCard from './CourseCard';\r\n import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n \r\n const CourseList = () => {\r\n-  const [courses, setCourses] = useState([]);\r\n-  const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n+  const [allCourses, setAllCourses] = useState([]);         // stores all courses\r\n+  const [enrolledCourses, setEnrolledCourses] = useState([]); // stores enrollment objects\r\n+  const [displayedCourses, setDisplayedCourses] = useState([]); // controls what is shown\r\n+  const [loading, setLoading] = useState(true);\r\n \r\n   const handleEnroll = async (courseId) => {\r\n     try {\r\n       await enrollCourse(courseId);\r\n-      setEnrolledCourses((prev) => [...prev, courseId]);\r\n+      // refetch enrollments\r\n+      const updatedEnrollments = await fetchEnrollments();\r\n+      setEnrolledCourses(updatedEnrollments);\r\n     } catch (error) {\r\n       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n     }\r\n   };\r\n \r\n   const loadData = async () => {\r\n     try {\r\n-      const courseData = await fetchCourses();\r\n-      const enrollmentsData = await fetchEnrollments();\r\n-      const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n-      setCourses(courseData);\r\n-      setEnrolledCourses(enrolledIds);\r\n+      setLoading(true);\r\n+      const courses = await fetchCourses();\r\n+      const enrollments = await fetchEnrollments();\r\n+      setAllCourses(courses);\r\n+      setEnrolledCourses(enrollments);\r\n+      setDisplayedCourses(courses); // Show all courses by default\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n+    } finally {\r\n+      setLoading(false);\r\n     }\r\n-  }\r\n+  };\r\n \r\n-  const handleAllCourses=async()=>{\r\n-     const courseData = await fetchCourses();\r\n-     setCourses(courseData)\r\n+  const handleAllCourses = () => {\r\n+    setDisplayedCourses(allCourses);\r\n+  };\r\n \r\n-  }\r\n-  const handleMyCourses=async()=>{\r\n-     const enrollmentsData = await fetchEnrollments();\r\n-     setCourses(enrollmentsData)\r\n-  }\r\n+  const handleMyCourses = () => {\r\n+    const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n+    const filtered = allCourses.filter((course) => enrolledIds.includes(course._id));\r\n+    setDisplayedCourses(filtered);\r\n+  };\r\n \r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n+  const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n+\r\n   return (\r\n     <>\r\n-     <div className=\"gap-5 flex mb-10 justify-center\">\r\n-        <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n-        <button onClick={handleAllCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">All Courses</button>\r\n+      <div className=\"gap-5 flex mb-10 justify-center\">\r\n+        <button onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600\">\r\n+          My Courses\r\n+        </button>\r\n+        <button onClick={handleAllCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600\">\r\n+          All Courses\r\n+        </button>\r\n       </div>\r\n-    <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n-      {\r\n-        courses.length === 0 ? (\r\n-          <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n-        ) : (\r\n-          courses.map((course) => (\r\n-            <CourseCard\r\n-              key={course._id}\r\n-              course={course}\r\n-              enrolled={enrolledCourses.includes(course._id)}\r\n-              onEnroll={handleEnroll}\r\n-            />\r\n-          ))\r\n-        )\r\n-      }\r\n-    </div>\r\n+\r\n+      <div className='grid md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n+        {\r\n+          loading ? (\r\n+            <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n+          ) : displayedCourses.length === 0 ? (\r\n+            <p className='text-center text-gray-600 col-span-full'>No courses found.</p>\r\n+          ) : (\r\n+            displayedCourses.map((course) => (\r\n+              <CourseCard\r\n+                key={course._id}\r\n+                course={course}\r\n+                enrolled={enrolledIds.includes(course._id)}\r\n+                onEnroll={handleEnroll}\r\n+              />\r\n+            ))\r\n+          )\r\n+        }\r\n+      </div>\r\n     </>\r\n   );\r\n };\r\n \r\n"
                },
                {
                    "date": 1754045097135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,84 +4,68 @@\n import CourseCard from './CourseCard';\r\n import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n \r\n const CourseList = () => {\r\n-  const [allCourses, setAllCourses] = useState([]);         // stores all courses\r\n-  const [enrolledCourses, setEnrolledCourses] = useState([]); // stores enrollment objects\r\n-  const [displayedCourses, setDisplayedCourses] = useState([]); // controls what is shown\r\n-  const [loading, setLoading] = useState(true);\r\n+  const [courses, setCourses] = useState([]);\r\n+  const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n \r\n   const handleEnroll = async (courseId) => {\r\n     try {\r\n       await enrollCourse(courseId);\r\n-      // refetch enrollments\r\n-      const updatedEnrollments = await fetchEnrollments();\r\n-      setEnrolledCourses(updatedEnrollments);\r\n+      setEnrolledCourses((prev) => [...prev, courseId]);\r\n     } catch (error) {\r\n       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n     }\r\n   };\r\n \r\n   const loadData = async () => {\r\n     try {\r\n-      setLoading(true);\r\n-      const courses = await fetchCourses();\r\n-      const enrollments = await fetchEnrollments();\r\n-      setAllCourses(courses);\r\n-      setEnrolledCourses(enrollments);\r\n-      setDisplayedCourses(courses); // Show all courses by default\r\n+      const courseData = await fetchCourses();\r\n+      const enrollmentsData = await fetchEnrollments();\r\n+      const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n+      setCourses(courseData);\r\n+      setEnrolledCourses(enrolledIds);\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n-    } finally {\r\n-      setLoading(false);\r\n     }\r\n-  };\r\n+  }\r\n \r\n-  const handleAllCourses = () => {\r\n-    setDisplayedCourses(allCourses);\r\n-  };\r\n+  const handleAllCourses=async()=>{\r\n+     const courseData = await fetchCourses();\r\n+     setCourses(courseData)\r\n \r\n-  const handleMyCourses = () => {\r\n-    const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n-    const filtered = allCourses.filter((course) => enrolledIds.includes(course._id));\r\n-    setDisplayedCourses(filtered);\r\n-  };\r\n+  }\r\n+  const handleMyCourses=async()=>{\r\n+     const enrollmentsData = await fetchEnrollments();\r\n+     setCourses(enrollmentsData)\r\n+  }\r\n \r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n-  const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n-\r\n   return (\r\n     <>\r\n-      <div className=\"gap-5 flex mb-10 justify-center\">\r\n-        <button onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600\">\r\n-          My Courses\r\n-        </button>\r\n-        <button onClick={handleAllCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600\">\r\n-          All Courses\r\n-        </button>\r\n+     <div className=\"gap-5 flex mb-10 justify-center\">\r\n+        <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n+        <button onClick={handleAllCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">All Courses</button>\r\n       </div>\r\n-\r\n-      <div className='grid md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n-        {\r\n-          loading ? (\r\n-            <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n-          ) : displayedCourses.length === 0 ? (\r\n-            <p className='text-center text-gray-600 col-span-full'>No courses found.</p>\r\n-          ) : (\r\n-            displayedCourses.map((course) => (\r\n-              <CourseCard\r\n-                key={course._id}\r\n-                course={course}\r\n-                enrolled={enrolledIds.includes(course._id)}\r\n-                onEnroll={handleEnroll}\r\n-              />\r\n-            ))\r\n-          )\r\n-        }\r\n-      </div>\r\n+    <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n+      {\r\n+        courses.length === 0 ? (\r\n+          <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n+        ) : (\r\n+          courses.map((course) => (\r\n+            <CourseCard\r\n+              key={course._id}\r\n+              course={course}\r\n+              enrolled={enrolledCourses.includes(course._id)}\r\n+              onEnroll={handleEnroll}\r\n+            />\r\n+          ))\r\n+        )\r\n+      }\r\n+    </div>\r\n     </>\r\n   );\r\n };\r\n \r\n"
                },
                {
                    "date": 1754045237119,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n   return (\r\n     <>\r\n      <div className=\"gap-5 flex mb-10 justify-center\">\r\n         <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n-        <button onClick={handleAllCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">All Courses</button>\r\n+       \\\r\n       </div>\r\n     <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n"
                },
                {
                    "date": 1754045250220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,13 +28,9 @@\n       console.error(\"Error loading data\", error);\r\n     }\r\n   }\r\n \r\n-  const handleAllCourses=async()=>{\r\n-     const courseData = await fetchCourses();\r\n-     setCourses(courseData)\r\n-\r\n-  }\r\n+ \r\n   const handleMyCourses=async()=>{\r\n      const enrollmentsData = await fetchEnrollments();\r\n      setCourses(enrollmentsData)\r\n   }\r\n"
                },
                {
                    "date": 1754045282902,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n       console.error(\"Error loading data\", error);\r\n     }\r\n   }\r\n \r\n- \r\n+ y\r\n   const handleMyCourses=async()=>{\r\n      const enrollmentsData = await fetchEnrollments();\r\n      setCourses(enrollmentsData)\r\n   }\r\n"
                },
                {
                    "date": 1754045289823,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n       console.error(\"Error loading data\", error);\r\n     }\r\n   }\r\n \r\n- y\r\n+ \r\n   const handleMyCourses=async()=>{\r\n      const enrollmentsData = await fetchEnrollments();\r\n      setCourses(enrollmentsData)\r\n   }\r\n@@ -42,9 +42,9 @@\n   return (\r\n     <>\r\n      <div className=\"gap-5 flex mb-10 justify-center\">\r\n         <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n-       \\\r\n+       \r\n       </div>\r\n     <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n"
                },
                {
                    "date": 1754045488592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,16 +7,16 @@\n const CourseList = () => {\r\n   const [courses, setCourses] = useState([]);\r\n   const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n \r\n-  const handleEnroll = async (courseId) => {\r\n-    try {\r\n-      await enrollCourse(courseId);\r\n-      setEnrolledCourses((prev) => [...prev, courseId]);\r\n-    } catch (error) {\r\n-      console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n-    }\r\n-  };\r\n+//   const handleEnroll = async (courseId) => {\r\n+//     try {\r\n+//       await enrollCourse(courseId);\r\n+//       setEnrolledCourses((prev) => [...prev, courseId]);\r\n+//     } catch (error) {\r\n+//       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n+//     }\r\n+//   };\r\n \r\n   const loadData = async () => {\r\n     try {\r\n       const courseData = await fetchCourses();\r\n@@ -29,23 +29,23 @@\n     }\r\n   }\r\n \r\n  \r\n-  const handleMyCourses=async()=>{\r\n-     const enrollmentsData = await fetchEnrollments();\r\n-     setCourses(enrollmentsData)\r\n-  }\r\n+//   const handleMyCourses=async()=>{\r\n+//      const enrollmentsData = await fetchEnrollments();\r\n+//      setCourses(enrollmentsData)\r\n+//   }\r\n \r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n     <>\r\n-     <div className=\"gap-5 flex mb-10 justify-center\">\r\n+     {/* <div className=\"gap-5 flex mb-10 justify-center\">\r\n         <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n        \r\n-      </div>\r\n+      </div> */}\r\n     <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n"
                },
                {
                    "date": 1754045563844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,52 +1,109 @@\n \r\n \r\n+// import React, { useEffect, useState } from 'react';\r\n+// import CourseCard from './CourseCard';\r\n+// import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n+\r\n+// const CourseList = () => {\r\n+//   const [courses, setCourses] = useState([]);\r\n+//   const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n+\r\n+// //   const handleEnroll = async (courseId) => {\r\n+// //     try {\r\n+// //       await enrollCourse(courseId);\r\n+// //       setEnrolledCourses((prev) => [...prev, courseId]);\r\n+// //     } catch (error) {\r\n+// //       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n+// //     }\r\n+// //   };\r\n+\r\n+//   const loadData = async () => {\r\n+//     try {\r\n+//       const courseData = await fetchCourses();\r\n+//       const enrollmentsData = await fetchEnrollments();\r\n+//       const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n+//       setCourses(courseData);\r\n+//       setEnrolledCourses(enrolledIds);\r\n+//     } catch (error) {\r\n+//       console.error(\"Error loading data\", error);\r\n+//     }\r\n+//   }\r\n+\r\n+ \r\n+// //   const handleMyCourses=async()=>{\r\n+// //      const enrollmentsData = await fetchEnrollments();\r\n+// //      setCourses(enrollmentsData)\r\n+// //   }\r\n+\r\n+//   useEffect(() => {\r\n+//     loadData();\r\n+//   }, []);\r\n+\r\n+//   return (\r\n+//     <>\r\n+//      {/* <div className=\"gap-5 flex mb-10 justify-center\">\r\n+//         <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n+       \r\n+//       </div> */}\r\n+//     <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n+//       {\r\n+//         courses.length === 0 ? (\r\n+//           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n+//         ) : (\r\n+//           courses.map((course) => (\r\n+//             <CourseCard\r\n+//               key={course._id}\r\n+//               course={course}\r\n+//               enrolled={enrolledCourses.includes(course._id)}\r\n+//               onEnroll={handleEnroll}\r\n+//             />\r\n+//           ))\r\n+//         )\r\n+//       }\r\n+//     </div>\r\n+//     </>\r\n+//   );\r\n+// };\r\n+\r\n+// export default CourseList;\r\n+\r\n+\r\n import React, { useEffect, useState } from 'react';\r\n import CourseCard from './CourseCard';\r\n import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n \r\n const CourseList = () => {\r\n   const [courses, setCourses] = useState([]);\r\n   const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n \r\n-//   const handleEnroll = async (courseId) => {\r\n-//     try {\r\n-//       await enrollCourse(courseId);\r\n-//       setEnrolledCourses((prev) => [...prev, courseId]);\r\n-//     } catch (error) {\r\n-//       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n-//     }\r\n-//   };\r\n+  const handleEnroll = async (courseId) => {\r\n+    try {\r\n+      await enrollCourse(courseId);\r\n+      setEnrolledCourses((prev) => [...prev, courseId]);\r\n+    } catch (error) {\r\n+      console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n+    }\r\n+  };\r\n \r\n   const loadData = async () => {\r\n     try {\r\n       const courseData = await fetchCourses();\r\n       const enrollmentsData = await fetchEnrollments();\r\n-      const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n+      const enrolledIds = enrollmentsData.map((e) => e.course._id); // Fix here\r\n       setCourses(courseData);\r\n       setEnrolledCourses(enrolledIds);\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n     }\r\n-  }\r\n+  };\r\n \r\n- \r\n-//   const handleMyCourses=async()=>{\r\n-//      const enrollmentsData = await fetchEnrollments();\r\n-//      setCourses(enrollmentsData)\r\n-//   }\r\n-\r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <>\r\n-     {/* <div className=\"gap-5 flex mb-10 justify-center\">\r\n-        <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n-       \r\n-      </div> */}\r\n-    <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n+    <div className='grid md:grid-cols-3 gap-4'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n@@ -60,9 +117,8 @@\n           ))\r\n         )\r\n       }\r\n     </div>\r\n-    </>\r\n   );\r\n };\r\n \r\n export default CourseList;\r\n"
                },
                {
                    "date": 1754045997933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,8 +95,10 @@\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n     }\r\n   };\r\n+  console.log(courses);\r\n+  \r\n \r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n"
                },
                {
                    "date": 1754046056444,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,8 +87,10 @@\n \r\n   const loadData = async () => {\r\n     try {\r\n       const courseData = await fetchCourses();\r\n+      console.log(courseData);\r\n+      \r\n       const enrollmentsData = await fetchEnrollments();\r\n       const enrolledIds = enrollmentsData.map((e) => e.course._id); // Fix here\r\n       setCourses(courseData);\r\n       setEnrolledCourses(enrolledIds);\r\n"
                },
                {
                    "date": 1754046305902,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,13 +86,11 @@\n   };\r\n \r\n   const loadData = async () => {\r\n     try {\r\n-      const courseData = await fetchCourses();\r\n-      console.log(courseData);\r\n-      \r\n+      const courseData = await fetchCourses();  \r\n       const enrollmentsData = await fetchEnrollments();\r\n-      const enrolledIds = enrollmentsData.map((e) => e.course._id); // Fix here\r\n+      const enrolledIds = enrollmentsData.map((e) => e._id); // Fix here\r\n       setCourses(courseData);\r\n       setEnrolledCourses(enrolledIds);\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n"
                },
                {
                    "date": 1754046346608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,74 +1,6 @@\n \r\n \r\n-// import React, { useEffect, useState } from 'react';\r\n-// import CourseCard from './CourseCard';\r\n-// import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n-\r\n-// const CourseList = () => {\r\n-//   const [courses, setCourses] = useState([]);\r\n-//   const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n-\r\n-// //   const handleEnroll = async (courseId) => {\r\n-// //     try {\r\n-// //       await enrollCourse(courseId);\r\n-// //       setEnrolledCourses((prev) => [...prev, courseId]);\r\n-// //     } catch (error) {\r\n-// //       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n-// //     }\r\n-// //   };\r\n-\r\n-//   const loadData = async () => {\r\n-//     try {\r\n-//       const courseData = await fetchCourses();\r\n-//       const enrollmentsData = await fetchEnrollments();\r\n-//       const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n-//       setCourses(courseData);\r\n-//       setEnrolledCourses(enrolledIds);\r\n-//     } catch (error) {\r\n-//       console.error(\"Error loading data\", error);\r\n-//     }\r\n-//   }\r\n-\r\n- \r\n-// //   const handleMyCourses=async()=>{\r\n-// //      const enrollmentsData = await fetchEnrollments();\r\n-// //      setCourses(enrollmentsData)\r\n-// //   }\r\n-\r\n-//   useEffect(() => {\r\n-//     loadData();\r\n-//   }, []);\r\n-\r\n-//   return (\r\n-//     <>\r\n-//      {/* <div className=\"gap-5 flex mb-10 justify-center\">\r\n-//         <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n-       \r\n-//       </div> */}\r\n-//     <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n-//       {\r\n-//         courses.length === 0 ? (\r\n-//           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n-//         ) : (\r\n-//           courses.map((course) => (\r\n-//             <CourseCard\r\n-//               key={course._id}\r\n-//               course={course}\r\n-//               enrolled={enrolledCourses.includes(course._id)}\r\n-//               onEnroll={handleEnroll}\r\n-//             />\r\n-//           ))\r\n-//         )\r\n-//       }\r\n-//     </div>\r\n-//     </>\r\n-//   );\r\n-// };\r\n-\r\n-// export default CourseList;\r\n-\r\n-\r\n import React, { useEffect, useState } from 'react';\r\n import CourseCard from './CourseCard';\r\n import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n \r\n@@ -86,26 +18,35 @@\n   };\r\n \r\n   const loadData = async () => {\r\n     try {\r\n-      const courseData = await fetchCourses();  \r\n+      const courseData = await fetchCourses();\r\n       const enrollmentsData = await fetchEnrollments();\r\n-      const enrolledIds = enrollmentsData.map((e) => e._id); // Fix here\r\n+      const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n       setCourses(courseData);\r\n       setEnrolledCourses(enrolledIds);\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n     }\r\n-  };\r\n-  console.log(courses);\r\n-  \r\n+  }\r\n \r\n+ y\r\n+  const handleMyCourses=async()=>{\r\n+     const enrollmentsData = await fetchEnrollments();\r\n+     setCourses(enrollmentsData)\r\n+  }\r\n+\r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n   return (\r\n-    <div className='grid md:grid-cols-3 gap-4'>\r\n+    <>\r\n+     <div className=\"gap-5 flex mb-10 justify-center\">\r\n+        <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n+       \\\r\n+      </div>\r\n+    <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n       {\r\n         courses.length === 0 ? (\r\n           <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n         ) : (\r\n@@ -119,8 +60,9 @@\n           ))\r\n         )\r\n       }\r\n     </div>\r\n+    </>\r\n   );\r\n };\r\n \r\n export default CourseList;\r\n"
                },
                {
                    "date": 1754046376144,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,67 +1,85 @@\n-\r\n-\r\n import React, { useEffect, useState } from 'react';\r\n import CourseCard from './CourseCard';\r\n import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n \r\n const CourseList = () => {\r\n-  const [courses, setCourses] = useState([]);\r\n-  const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n+  const [allCourses, setAllCourses] = useState([]);         // stores all courses\r\n+  const [enrolledCourses, setEnrolledCourses] = useState([]); // stores enrollment objects\r\n+  const [displayedCourses, setDisplayedCourses] = useState([]); // controls what is shown\r\n+  const [loading, setLoading] = useState(true);\r\n \r\n   const handleEnroll = async (courseId) => {\r\n     try {\r\n       await enrollCourse(courseId);\r\n-      setEnrolledCourses((prev) => [...prev, courseId]);\r\n+      // refetch enrollments\r\n+      const updatedEnrollments = await fetchEnrollments();\r\n+      setEnrolledCourses(updatedEnrollments);\r\n     } catch (error) {\r\n       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n     }\r\n   };\r\n \r\n   const loadData = async () => {\r\n     try {\r\n-      const courseData = await fetchCourses();\r\n-      const enrollmentsData = await fetchEnrollments();\r\n-      const enrolledIds = enrollmentsData.map((e) => e.course._id); \r\n-      setCourses(courseData);\r\n-      setEnrolledCourses(enrolledIds);\r\n+      setLoading(true);\r\n+      const courses = await fetchCourses();\r\n+      const enrollments = await fetchEnrollments();\r\n+      setAllCourses(courses);\r\n+      setEnrolledCourses(enrollments);\r\n+      setDisplayedCourses(courses); // Show all courses by default\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n+    } finally {\r\n+      setLoading(false);\r\n     }\r\n-  }\r\n+  };\r\n \r\n- y\r\n-  const handleMyCourses=async()=>{\r\n-     const enrollmentsData = await fetchEnrollments();\r\n-     setCourses(enrollmentsData)\r\n-  }\r\n+  const handleAllCourses = () => {\r\n+    setDisplayedCourses(allCourses);\r\n+  };\r\n \r\n+  const handleMyCourses = () => {\r\n+    const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n+    const filtered = allCourses.filter((course) => enrolledIds.includes(course._id));\r\n+    setDisplayedCourses(filtered);\r\n+  };\r\n+\r\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n+  const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n+\r\n   return (\r\n     <>\r\n-     <div className=\"gap-5 flex mb-10 justify-center\">\r\n-        <button  onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600 \">My Courses</button>\r\n-       \\\r\n+      <div className=\"gap-5 flex mb-10 justify-center\">\r\n+        <button onClick={handleMyCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600\">\r\n+          My Courses\r\n+        </button>\r\n+        <button onClick={handleAllCourses} className=\"bg-pink-400 px-6 py-2 rounded-lg hover:bg-pink-600\">\r\n+          All Courses\r\n+        </button>\r\n       </div>\r\n-    <div className='grid   md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n-      {\r\n-        courses.length === 0 ? (\r\n-          <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n-        ) : (\r\n-          courses.map((course) => (\r\n-            <CourseCard\r\n-              key={course._id}\r\n-              course={course}\r\n-              enrolled={enrolledCourses.includes(course._id)}\r\n-              onEnroll={handleEnroll}\r\n-            />\r\n-          ))\r\n-        )\r\n-      }\r\n-    </div>\r\n+\r\n+      <div className='grid md:grid-cols-2 lg:grid-cols-3 gap-8 px-10 w-[500px] sm:w-auto text-white'>\r\n+        {\r\n+          loading ? (\r\n+            <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n+          ) : displayedCourses.length === 0 ? (\r\n+            <p className='text-center text-gray-600 col-span-full'>No courses found.</p>\r\n+          ) : (\r\n+            displayedCourses.map((course) => (\r\n+              <CourseCard\r\n+                key={course._id}\r\n+                course={course}\r\n+                enrolled={enrolledIds.includes(course._id)}\r\n+                onEnroll={handleEnroll}\r\n+              />\r\n+            ))\r\n+          )\r\n+        }\r\n+      </div>\r\n     </>\r\n   );\r\n };\r\n \r\n"
                },
                {
                    "date": 1754046391426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n     setDisplayedCourses(allCourses);\r\n   };\r\n \r\n   const handleMyCourses = () => {\r\n-    const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n+    const enrolledIds = enrolledCourses.map((e) => e._id);\r\n     const filtered = allCourses.filter((course) => enrolledIds.includes(course._id));\r\n     setDisplayedCourses(filtered);\r\n   };\r\n \r\n"
                },
                {
                    "date": 1754046438596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n   useEffect(() => {\r\n     loadData();\r\n   }, []);\r\n \r\n-  const enrolledIds = enrolledCourses.map((e) => e.course._id);\r\n+  const enrolledIds = enrolledCourses.map((e) => e._id);\r\n \r\n   return (\r\n     <>\r\n       <div className=\"gap-5 flex mb-10 justify-center\">\r\n"
                },
                {
                    "date": 1754140236429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,17 +2,17 @@\n import CourseCard from './CourseCard';\r\n import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n \r\n const CourseList = () => {\r\n-  const [allCourses, setAllCourses] = useState([]);         // stores all courses\r\n-  const [enrolledCourses, setEnrolledCourses] = useState([]); // stores enrollment objects\r\n-  const [displayedCourses, setDisplayedCourses] = useState([]); // controls what is shown\r\n+  const [allCourses, setAllCourses] = useState([]);         \r\n+  const [enrolledCourses, setEnrolledCourses] = useState([]); \r\n+  const [displayedCourses, setDisplayedCourses] = useState([]); \r\n   const [loading, setLoading] = useState(true);\r\n \r\n   const handleEnroll = async (courseId) => {\r\n     try {\r\n       await enrollCourse(courseId);\r\n-      // refetch enrollments\r\n+     \r\n       const updatedEnrollments = await fetchEnrollments();\r\n       setEnrolledCourses(updatedEnrollments);\r\n     } catch (error) {\r\n       console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n@@ -25,9 +25,9 @@\n       const courses = await fetchCourses();\r\n       const enrollments = await fetchEnrollments();\r\n       setAllCourses(courses);\r\n       setEnrolledCourses(enrollments);\r\n-      setDisplayedCourses(courses); // Show all courses by default\r\n+      setDisplayedCourses(courses);\r\n     } catch (error) {\r\n       console.error(\"Error loading data\", error);\r\n     } finally {\r\n       setLoading(false);\r\n"
                }
            ],
            "date": 1754033967563,
            "name": "Commit-0",
            "content": "// import React, { useEffect, useState } from 'react'\r\n// import CourseCard from './CourseCard'\r\n// import { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api'\r\n\r\n// ]\r\n\r\n// const CourseList = () => {\r\n//     const [courses,setCourses]=useState()\r\n//     const [enrolledCourseIds,setEnrolledCourseIds]=useState([])\r\n//     const handleEnroll=(courseId)=>{\r\n//        try {\r\n//          await enrollCourse(courseId)\r\n//         setEnrolledCourseIds((prev)=>[...prev,courseId])\r\n\r\n//        } catch (error) {\r\n//         console.error(\"Enrollment failed\",error.response?.data?.message||error.message);\r\n                \r\n//        }\r\n//     }\r\n\r\n//     const loadData=async()=>{\r\n//         try{\r\n\r\n//             const courseData=await fetchCourses()\r\n//             const enrollmentsData=await fetchEnrollments()\r\n//             const enrolledIds=enrollmentsData.map((e)=> e.courseId)\r\n//             setCourses(courseData)\r\n//             setEnrolledCourses(enrolledIds)\r\n//         }\r\n//         catch(error){\r\n//             console.error(\"Error loading data\",error);\r\n            \r\n//         }\r\n//     }\r\n//     useEffect(()=>{\r\n//         loadData()\r\n//     },[])\r\n\r\n//   return (\r\n//     <div className='grid md:grid-cols-3 gap-4'>\r\n//         {/* <p className='text-center text-gray-600'>Loading courses</p> */}\r\n//         {\r\n//             courses.map((course)=>(\r\n//                 <CourseCard\r\n                  \r\n//                    key={course._id}\r\n//                    course={course}\r\n//                    enrolled={enrolledCourses.includes(course._id)}\r\n//                    onEnroll={handleEnroll}\r\n//                 />\r\n//             ))\r\n//         }\r\n\r\n//     </div>\r\n//   )\r\n// }\r\n\r\n// export default CourseList\r\n\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport CourseCard from './CourseCard';\r\nimport { enrollCourse, fetchCourses, fetchEnrollments } from '../services/api';\r\n\r\nconst CourseList = () => {\r\n  const [courses, setCourses] = useState([]);\r\n  const [enrolledCourses, setEnrolledCourses] = useState([]);\r\n\r\n  const handleEnroll = async (courseId) => {\r\n    try {\r\n      await enrollCourse(courseId);\r\n      setEnrolledCourses((prev) => [...prev, courseId]);\r\n    } catch (error) {\r\n      console.error(\"Enrollment failed\", error.response?.data?.message || error.message);\r\n    }\r\n  };\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      const courseData = await fetchCourses();\r\n      const enrollmentsData = await fetchEnrollments();\r\n      const enrolledIds = enrollmentsData.map((e) => e.course._id); // Fix here\r\n      setCourses(courseData);\r\n      setEnrolledCourses(enrolledIds);\r\n    } catch (error) {\r\n      console.error(\"Error loading data\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className='grid md:grid-cols-3 gap-4'>\r\n      {\r\n        courses.length === 0 ? (\r\n          <p className='text-center text-gray-600 col-span-full'>Loading courses...</p>\r\n        ) : (\r\n          courses.map((course) => (\r\n            <CourseCard\r\n              key={course._id}\r\n              course={course}\r\n              enrolled={enrolledCourses.includes(course._id)}\r\n              onEnroll={handleEnroll}\r\n            />\r\n          ))\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseList;\r\n"
        }
    ]
}